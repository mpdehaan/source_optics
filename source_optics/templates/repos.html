{% include 'header.html' %}
{% include 'nav.html' %}

<form id="repoForm">

<!-- TODO: link to org index with buttons -->

<div id="myGrid" class="ag-theme-balham"></div>

  <script type="text/javascript" charset="utf-8">

    {% include 'tables.js' %}

    function checkBoxCell(params) {
        return "<input type='checkbox' name='repo' value='" + params.value + "'/>";
    }

    function repoNavCell(params) {
        return repoNav(params.value);
    }

    var columnDefs = [
        {headerName: "",               field: "details1", cellRenderer: checkBoxCell, width: 60},
        {headerName: "Name",           field: "name", sortable: true, filter: true },
        {headerName: "Explore",        field: "details2", cellRenderer: repoNavCell },
        {headerName: "Authors",        field: "author_total", sortable: true, filter: true },
        {headerName: "L+",             field: "lines_added", sortable: true, filter: true },
        {headerName: "L-",             field: "lines_removed", sortable: true, filter: true },
        {headerName: "#Commits",       field: "commit_total", sortable: true, filter: true },
        {headerName: "Days Active",    field: "days_active", sortable: true, filter: true },
        {headerName: "Last Scanned",   field: "last_scanned", sortable: true, filter: true }
    ];

    var rowData = {{ repo_table | safe }};

    var gridOptions = {
      columnDefs: columnDefs,
      rowData: rowData,
      paginationAutoPageSize: true,
      pagination: true,
      onFirstDataRendered: onFirstDataRendered,
    };

    function onFirstDataRendered(params) {
         params.api.sizeColumnsToFit();
    }

  var eGridDiv = document.querySelector('#myGrid');
  thisGrid = new agGrid.Grid(eGridDiv, gridOptions);


  </script>

</form>

{% include 'footer.html' %}